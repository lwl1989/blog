CreateTime:2021-04-02 10:59:52.0

# 什么叫TCP

面向**连接**的，可靠的**传输协议**


### 三次握手

![](https://oscimg.oschina.net/oscnet/up-ba7ab7621883427ca1ff705456cc16ca0dd.png)

小知识：

ddos攻击，一般是通过最后一次握手不给予回馈，让S端大量阻塞在等待C端的最后一步ACK的过程中

### 最大连接数

满足四元组方程。

![](https://oscimg.oschina.net/oscnet/up-80371ff6789029d186f849156334c1b39f8.png)

### C10k问题

随着互联网的普及，应用的用户群体几何倍增长，此时服务器性能问题就出现。最初的服务器是基于进程/线程模型。新到来一个TCP连接，就需要分配一个进程。假如有C10K，就需要创建1W个进程，可想而知单机是无法承受的。那么如何突破单机性能是高性能网络编程必须要面对的问题，进而这些局限和问题就统称为C10K问题，最早是由Dan Kegel进行归纳和总结的，并且他也系统的分析和提出解决方案。

C10K问题的本质
C10K问题的本质上是操作系统的问题。对于Web 1.0/2.0时代的操作系统，传统的同步阻塞I/O模型处理方式都是requests per second。当创建的进程或线程多了，数据拷贝频繁（缓存I/O、内核将数据拷贝到用户进程空间、阻塞，进程/线程上下文切换消耗大， 导致操作系统崩溃，这就是C10K问题的本质。

可见, 解决C10K问题的关键就是尽可能减少这些CPU资源消耗。

### 四次分手

![](https://oscimg.oschina.net/oscnet/up-2d0697d734dcb13f2c99048f3d86e4c58b9.png)